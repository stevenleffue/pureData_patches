#N canvas 226 440 614 482 10;
#X obj 31 46 inlet;
#X obj 224 419 outlet;
#X obj 282 64 inlet;
#X text 4 23 x value query;
#X obj 49 442 outlet;
#X text 236 437 new tempo context;
#X obj 187 222 until;
#X obj 176 322 sel 1;
#N canvas 340 152 691 443 next-tmarker 1;
#X obj 167 137 until;
#X obj 167 112 t b p;
#X msg 167 161 next;
#X obj 204 199 pointer t_tmarker;
#X obj 193 228 b;
#X obj 167 88 inlet;
#X obj 89 347 outlet;
#X obj 203 353 outlet;
#X obj 318 353 outlet;
#X obj 451 279 pointer;
#X obj 365 245 t b b b;
#X obj 394 288 1e+20;
#X obj 363 288 0;
#X obj 205 281 get t_tmarker x;
#X text 167 66 previous time marker (or head of list);
#X text 315 374 pointer;
#X text 201 372 x-value;
#X text 75 20 get next time marker. If none exists \, signal it by
sending 1e+20 as the x-value.;
#X text 81 371 number of;
#X text 79 384 score-time;
#X text 77 397 units (beats);
#X obj 256 110 get t_tmarker n;
#X obj 274 252 t b p p;
#X obj 91 282 f;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 1 1 3 1;
#X connect 1 1 9 1;
#X connect 1 1 21 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 0 22 0;
#X connect 3 2 4 0;
#X connect 3 2 10 0;
#X connect 4 0 0 1;
#X connect 5 0 1 0;
#X connect 9 0 8 0;
#X connect 10 0 12 0;
#X connect 10 1 11 0;
#X connect 10 2 9 0;
#X connect 11 0 7 0;
#X connect 12 0 6 0;
#X connect 13 0 7 0;
#X connect 21 0 23 1;
#X connect 22 0 23 0;
#X connect 22 1 13 0;
#X connect 22 2 8 0;
#X connect 23 0 6 0;
#X restore 221 269 pd next-tmarker;
#X obj 187 175 >;
#X obj 187 197 sel 1;
#X obj 221 245 pointer;
#X obj 163 297 >=;
#X obj 31 70 t f f f;
#X obj 120 45 inlet;
#X text 112 26 beat now;
#X text 19 463 beats remaining until x;
#X obj 79 367 -;
#X obj 115 406 outlet;
#X text 114 430 beat at x;
#X obj 49 343 t f f;
#X obj 49 388 swap;
#X obj 385 346 /;
#X obj 401 317 -;
#X obj 454 346 +;
#X obj 54 168 -;
#X obj 54 193 *;
#X obj 54 220 +;
#X obj 282 86 unpack 0 0 0 0 p;
#X obj 224 396 pack 0 0 0 0 p;
#X text 190 15 tempo context: prev-tmarker-beat \, beats-per-x \, next-tmarker-beat
\, next-tmarker-x \, next-tmarker-pointer. If next-x is 1e+20 \, the
next-pointer isn't valid.;
#X obj 326 345 f;
#X obj 54 247 max;
#X obj 354 345 0;
#X obj 221 297 t b b f;
#X text 378 363 old tempo;
#X text 379 377 calculation;
#X text 354 400 (use "0" if we want to reinterpret;
#X text 352 417 time as quantized to the next beat marker);
#X connect 0 0 13 0;
#X connect 2 0 28 0;
#X connect 6 0 11 0;
#X connect 7 0 6 1;
#X connect 8 0 34 0;
#X connect 8 1 12 0;
#X connect 8 1 23 0;
#X connect 8 1 29 3;
#X connect 8 2 29 4;
#X connect 9 0 10 0;
#X connect 10 0 6 0;
#X connect 11 0 8 0;
#X connect 12 0 7 0;
#X connect 13 0 25 0;
#X connect 13 1 9 0;
#X connect 13 2 12 1;
#X connect 14 0 17 1;
#X connect 17 0 21 1;
#X connect 20 0 21 0;
#X connect 20 1 17 0;
#X connect 21 0 4 0;
#X connect 21 1 18 0;
#X connect 22 0 29 1;
#X connect 23 0 22 1;
#X connect 24 0 29 2;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 27 0 32 0;
#X connect 28 0 32 1;
#X connect 28 1 26 1;
#X connect 28 2 24 1;
#X connect 28 2 27 1;
#X connect 28 2 31 1;
#X connect 28 3 23 1;
#X connect 28 3 9 1;
#X connect 28 3 25 1;
#X connect 28 4 11 1;
#X connect 29 0 1 0;
#X connect 31 0 29 0;
#X connect 32 0 20 0;
#X connect 34 0 31 0;
#X connect 34 1 33 0;
#X connect 34 2 24 0;
#X connect 34 2 22 0;
